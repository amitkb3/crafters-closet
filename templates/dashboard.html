
{% extends 'base.html' %}

{% block subtitle %} Dashboard {% endblock %}

{% block body %}

<h1>Dashboard</h1>

<br>

<!-- Begin Inventory Panel -->

<div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Search Inventory</h3>
    </div>

  <div class="panel-body" id="filter-search">
      <!-- Buttons for Inventory Functionality -->
      <h4>Choose your filter options.</h4>
      <div id="filter-options">
          <div class="btn-group-horizontal" role="group" aria-label="filter-options">

              <label for="filter-type">Filter by Type:</label>
              <select type="button" class="btn btn-default btn-sm" data-target="" name="filter-type" id="filter-type">
                <option value=""></option>
                {% for type in all_supply_types %}
                    <option value="{{ type[0] }}">{{ type[0] }}</option> 
                {% endfor %}
              </select>

              <label for="filter-brand">Filter by Brand:</label>
              <select type="button" class="btn btn-default btn-sm" data-target="" name="filter-brand" id="filter-brand">
                <option value=""></option>
                {% for brand in all_brands %}
                    <option value="{{ brand[0] }}">{{ brand[0] }}</option> 
                {% endfor %}
              </select>

              <label for="filter-color">Filter by Color:</label>
              <select type="button" class="btn btn-default btn-sm" data-target="" name="filter-color" id="filter-color">
                <option value=""></option>
                {% for color in all_colors %}
                    <option value="{{ color[0] }}">{{ color[0] }}</option> 
                {% endfor %}
              </select>

              <button type="button" id="apply-filter" class="btn btn-default btn-sm" data-target="">Apply Filter</button>

              <br>
          </div>

          <div id="search-field">
              <input type="text" name="search-term" id="search-term" placeholder="Enter search term.">
              <button type="button" class="btn btn-default btn-sm" id="search-button">Search!</button>
          </div>   
      </div>
  </div>
</div>

<div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Your Inventory</h3>
    </div>

    <div class="panel-body">

      <!-- Display inventory with safe HTML obtained from server. -->
      <div id="inv-table">
        {{ table_body }}
      </div>

      <button type="button" class="btn btn-default btn-lg" data-toggle="modal" data-target="#add-supply">Add a Supply!</button>

    </div>
    <script src="/static/js/inventorySearch.js"></script>
</div>

<!-- Modal Code for "Add a Supply" button -->
<div class="modal fade" id="add-supply">

  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Add a Supply to Your Inventory</h4>
      </div>

      <!-- Begin Modal Body -->
      <div class="modal-body">
            <form action="/add-supply" method="POST">

                  <div class="form-group">
                    <!-- Supply Type Dropdown -->
                    <label for="supplytype">Supply Type</label><br>
                        <select class="form-control" name="supplytype" id="supplytype">
                          <option value=""></option>
                          {% for type in all_supply_types %}
                            <option value="{{ type[0] }}">{{ type[0] }}</option> 
                          {% endfor %}
                        </select>
                  </div>
                  <br>

                  <!-- Brand -->
                  <div class="form-group">
                    <label for="brand">Brand</label>
                    <select class="form-control" name="brand" id="brand"></select>
                  </div>
                  <br>

                  <!-- Color -->
                  <div class="form-group">
                    <label for="color">Color</label>
                    <input type="text" class="form-control" name="color" id="color" placeholder="What color is this supply?">
                  </div> 
                  <br>

                  <!-- URL -->
                  <div class="form-group">
                    <label for="purchase-url">Purchase URL</label>
                    <input type="text" class="form-control" name="purchase-url" id="purchase-url" placeholder="Where did you buy this supply?">
                  </div>

                  <!-- Qty Owned -->
                  <div class="form-group">
                    <label for="quantity-owned">Quantity You Own (in UNITS)</label>
                    <input type="number" class="form-control" name="quantity-owned" id="quantity-owned" min=0>
                  </div>

                  <!-- Units -->
                  <div class="form-group">
                    <label for="units">Units</label><br>
                    <input class="form-control" type=text name="units" id="units" readonly="readonly">
                  </div>

                <button type="button" class="btn btn-secondary" data-dismiss="modal">Nevermind!</button>
                <button type="submit" class="btn btn-primary">Add Supply</button>
            </form>
        <script src="/static/js/dropdown.js"></script>
    </div>

    </div><!-- /.modal-content -->

  </div><!-- /.modal-dialog -->

</div><!-- /.modal -->


<!-- Begin Project Panel -->
<div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Your Projects</h3>
    </div>

    <div class="panel-body">
        <div class="project-options">
              <!-- Buttons for Project Options -->
              <div class="btn-group-horizontal" role="group" aria-label="inventory-options">
                  <button onclick="window.location.href='/create-project'" type="button" class="btn btn-default btn-lg" data-toggle="modal" data-target="">Create a New Project</button>
              </div>    
        </div>

        <!-- Display Inventory -->
        <table class="table table-striped">
          <thead>
          <tr>
              <th>Title</th>
              <th>Description</th>
          </tr>
          </thead>
          <tbody>
          {% for project in projects %}
          <tr>
              <td><a href="/project/{{project.project_id}}">{{ project.title.title() }}</a></td>
              <td>{{ project.description[:50] }}...</td>
          </tr>
          {% endfor %}
          </tbody>
        </table>
  </div>
</div>

{% endblock %}