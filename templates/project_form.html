{% extends 'base.html' %}

{% block subtitle %}
Create Project
{% endblock %}

{% block body %}
<h1> Create a New Project </h1>
    
    
    <form action="/create-project" method="POST">
        <!-- Basic Project info -->
        <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Basic Project Information</h3>
            </div>

            <div class="panel-body">
              <div class="form-group">
                <label for="title">Title</label>
                <input type="text" class="form-control" name="title" id="title" placeholder="What is this project called?">
              </div>

              <div class="form-group">
                <label for="description">Description (500 characters or less.)</label>
                <textarea type="text" class="form-control" name="description" id="description" placeholder="Notes, general ideas, or anything else you want to say about this project."></textarea>
              </div>

              <div class="form-group">
                <label for="instr-url">Instruction URL</label>
                <input type="text" class="form-control" name="instr-url" id="instr-url" placeholder="Include a link to a tutorial, if you want.">
              </div>
            </div>
        </div>

        <!-- Adding Supplies -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Supplies Required (Don't refresh the page unless you want to start over!)</h3>
            </div>
            <div class="panel-body">
                <div id="supplies-to-add">
                    <!-- Supply forms will appear here. -->
                </div>
                <button type="button" class="btn btn-default btn-sm" id="supply-form-gen">
                    <span class="glyphicon glyphicon-plus"></span> Add a Supply to This Project
                </button>
            </div>

            <input type="hidden" id="num-supplies" name="num-supplies" value="0">
        </div>

        <button type="submit" class="btn btn-primary">Create Project</button>
    </form>

<br>

    <script src="http://code.jquery.com/jquery.js"></script>
    <script>
        "use strict";
        var formCounter = 0;

        $("#supply-form-gen").on("click", function() {

                var formCounterStr = formCounter.toString();

                var supplyTypeName = "supplytype" + formCounterStr.toString();
                var brandName = "brand" + formCounterStr.toString();
                var colorName = "color" + formCounterStr.toString();
                var purchaseUrlName = "purchase-url" + formCounterStr.toString();
                var unitsName = "units" + formCounterStr.toString();
                var qtyRequiredName = "qty-required" + formCounterStr.toString();

                var form = "<div class=\"panel-body\"><div class=\"form-group\"><!-- Supply Type Dropdown --><label for=\"supplytype\">Supply Type #"+formCounterStr+"</label><br><select name=\""+supplyTypeName+"\" id=\"supplytype\">{% for type in all_supply_types %}<option value=\"{{ type[0] }}\">{{ type[0] }}</option>{% endfor %}</select></div><div class=\"form-group\"><label for=\"brand\">Brand</label><input type=\"text\" class=\"form-control\" name=\""+brandName+"\" id=\"brand\" placeholder=\"What company made this supply?\"></div><div class=\"form-group\"><label for=\"color\">Color</label><input type=\"text\" class=\"form-control\" name=\""+colorName+"\" id=\"color\" placeholder=\"What color is this supply?\"></div><div class=\"form-group\"><label for=\"purchase-url\">Purchase URL</label><input type=\"text\" class=\"form-control\" name=\""+purchaseUrlName+"\" id=\"purchase-url\" placeholder=\"Where did you buy this supply?\"></div><div class=\"form-group\"><!-- FIXME: Change label below to reflect units of dropdown value dynamically. --><label for=\"qty-required\">Quantity Needed For Project</label><input type=\"number\" class=\"form-control\" name=\""+qtyRequiredName+"\" id=\"qty-required\"></div><div class=\"form-group\"><!-- Units Dropdown --><!-- FIXME: Remove units option when I can reflect units on qty above --><label for=\"units\">Units (Don't be a jerk. Pick the unit that matches your supply type.)</label><br><select name=\""+unitsName+"\" id=\"units\">{% for unit in all_units %}<option value=\"{{ unit[0] }}\">{{ unit[0] }}</option>{% endfor %}</select></div></div>";

                $("#supplies-to-add").append(form);
                $("#num-supplies").val(formCounter);

                formCounter++;
        });

    </script> 

    <button type="button" class="btn btn-default btn-sm" id="test-gen">
        <span class="glyphicon glyphicon-plus"></span> TEST ADDING SUPPLY
    </button>
    <div class="panel-body" id="test">
    </div>

    <script src="/static/js/supplyFormGen.js"></script> 
    <script src="/static/js/dropdown.js"></script>


<!-- <script src="/static/js/FILE"></script> -->

{% endblock %}